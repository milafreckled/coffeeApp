{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/snack-bar\";\nimport * as i2 from \"@angular/service-worker\";\nimport * as i3 from \"./auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/toolbar\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/material/icon\";\nfunction AppComponent_a_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 4)(1, \"button\", 5);\n    i0.ɵɵtext(2, \"Log In\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AppComponent_a_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 6)(1, \"button\", 5);\n    i0.ɵɵtext(2, \"Log Out\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class AppComponent {\n  constructor(snackBar, swUpdate, auth) {\n    this.snackBar = snackBar;\n    this.swUpdate = swUpdate;\n    this.auth = auth;\n  }\n  onLogout() {\n    this.auth.logout().subscribe(response => console.log(response));\n  }\n  updateNetworkStatusUI() {\n    if (navigator.onLine) {\n      document.querySelector('body').style = \"\";\n    } else {\n      document.querySelector('body').style = \"filter: grayscale(1)\";\n    }\n  }\n  subscribeToPush() {\n    Notification.requestPermission(result => {\n      if (result === \"granted\") {\n        console.log(\"Permission granted!\");\n        // this.ngsw.registerForPush({applicationServerKey: ''})\n        //   .susbcribe((registration: NgPushRegistration) => registration)\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.isLoggedIn = this.auth.isLoggedIn();\n    this.swUpdate.versionUpdates.subscribe(update => {\n      switch (update.type) {\n        case 'VERSION_DETECTED':\n          const sb = this.snackBar.open(\"Do you want to install this app?\", \"Install now\", {\n            duration: 4000\n          });\n          sb.onAction().subscribe(e => this.swUpdate.activateUpdate());\n          console.log(`Downloading new app version: ${update.version.hash}`);\n          location.reload();\n          break;\n        case 'VERSION_READY':\n          console.log(`Current app version: ${update.currentVersion.hash}`);\n          console.log(`New app version ready for use: ${update.latestVersion.hash}`);\n          break;\n        case 'VERSION_INSTALLATION_FAILED':\n          console.log(`Failed to install app version '${update.version.hash}': ${update.error}`);\n          break;\n      }\n    });\n    this.swUpdate.checkForUpdate();\n    window.addEventListener(\"online\", this.updateNetworkStatusUI);\n    window.addEventListener(\"offline\", this.updateNetworkStatusUI);\n    if (navigator.standalone === false) {\n      this.snackBar.open(\"You can add this PWA to a home screen\", \"\", {\n        duration: 3000\n      });\n    } else if (navigator.standalone === undefined) {\n      if (window.matchMedia(\"(display-mode: browser)\").matches) {\n        window.addEventListener(\"beforeinstallprompt\", event => {\n          event.preventDefault();\n          const sb = this.snackBar.open(\"Do you want to install this app?\", \"Install\", {\n            duration: 5000\n          });\n          sb.onAction().subscribe(() => {\n            event.prompt();\n            event.userChoice().then(result => {\n              if (result.outcome === \"dismisses\") {} else {}\n            });\n          });\n          return false;\n        });\n      }\n    }\n  }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.MatSnackBar), i0.ɵɵdirectiveInject(i2.SwUpdate), i0.ɵɵdirectiveInject(i3.AuthService));\n};\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 9,\n  vars: 2,\n  consts: [[\"color\", \"primary\"], [\"matButton\", \"\", 3, \"click\"], [\"class\", \"login-btn\", \"routerLink\", \"/login\", 4, \"ngIf\"], [\"class\", \"login-btn\", \"routerLink\", \"/logout\", 4, \"ngIf\"], [\"routerLink\", \"/login\", 1, \"login-btn\"], [\"color\", \"accent\", \"mat-raised-button\", \"\"], [\"routerLink\", \"/logout\", 1, \"login-btn\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-toolbar\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"My Coffee app\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"a\", 1);\n      i0.ɵɵlistener(\"click\", function AppComponent_Template_a_click_3_listener() {\n        return ctx.subscribeToPush();\n      });\n      i0.ɵɵelementStart(4, \"mat-icon\");\n      i0.ɵɵtext(5, \"message\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(6, AppComponent_a_6_Template, 3, 0, \"a\", 2);\n      i0.ɵɵtemplate(7, AppComponent_a_7_Template, 3, 0, \"a\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"router-outlet\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoggedIn);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoggedIn);\n    }\n  },\n  dependencies: [i4.RouterOutlet, i4.RouterLink, i5.NgIf, i6.MatToolbar, i7.MatButton, i8.MatIcon],\n  styles: [\"mat-toolbar[_ngcontent-%COMP%]{\\n   position: relative;\\n}\\n\\n.login-btn[_ngcontent-%COMP%]{\\n    position: absolute;\\n    right: 3%;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7R0FDRyxrQkFBa0I7QUFDckI7O0FBRUE7SUFDSSxrQkFBa0I7SUFDbEIsU0FBUztBQUNiIiwic291cmNlc0NvbnRlbnQiOlsibWF0LXRvb2xiYXJ7XG4gICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi5sb2dpbi1idG57XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHJpZ2h0OiAzJTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","AppComponent","constructor","snackBar","swUpdate","auth","onLogout","logout","subscribe","response","console","log","updateNetworkStatusUI","navigator","onLine","document","querySelector","style","subscribeToPush","Notification","requestPermission","result","ngOnInit","isLoggedIn","versionUpdates","update","type","sb","open","duration","onAction","e","activateUpdate","version","hash","location","reload","currentVersion","latestVersion","error","checkForUpdate","window","addEventListener","standalone","undefined","matchMedia","matches","event","preventDefault","prompt","userChoice","then","outcome","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/ludmilamalomuz/Desktop/Frontend projects/coffeeapp-pwa/coffeeapp2/src/app/app.component.html","/Users/ludmilamalomuz/Desktop/Frontend projects/coffeeapp-pwa/coffeeapp2/src/app/app.component.ts"],"sourcesContent":["<mat-toolbar color=\"primary\">\n  <h1>My Coffee app</h1>\n  <a (click)=\"subscribeToPush()\" matButton><mat-icon>message</mat-icon></a>\n  <a *ngIf=\"!isLoggedIn\" class=\"login-btn\" routerLink='/login'><button  color=\"accent\" mat-raised-button>Log In</button></a>\n  <a *ngIf=\"isLoggedIn\" class=\"login-btn\" routerLink='/logout'><button  color=\"accent\" mat-raised-button>Log Out</button></a>\n</mat-toolbar>\n\n<router-outlet></router-outlet>","import { Component } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { SwUpdate } from '@angular/service-worker'\nimport { AuthService } from './auth.service';\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n\n  constructor(private snackBar: MatSnackBar,\n    private swUpdate: SwUpdate, private auth: AuthService){ \n  }\n  isLoggedIn!: boolean;\n  onLogout() {\n    this.auth.logout().subscribe(response => console.log(response))\n  }\n  updateNetworkStatusUI(){\n    if (navigator.onLine){\n      (document.querySelector('body') as any).style = \"\"\n    }else{\n      (document.querySelector('body') as any).style = \"filter: grayscale(1)\"\n    }\n  }\n  subscribeToPush(){\n    Notification.requestPermission(result => {\n      if (result === \"granted\"){\n        console.log(\"Permission granted!\")\n        // this.ngsw.registerForPush({applicationServerKey: ''})\n        //   .susbcribe((registration: NgPushRegistration) => registration)\n      }\n    })\n  }\n  ngOnInit(){\n    this.isLoggedIn = this.auth.isLoggedIn();\n    this.swUpdate.versionUpdates.subscribe(update => {\n      switch (update.type){\n        case 'VERSION_DETECTED':  \n          const sb = this.snackBar.open(\"Do you want to install this app?\", \"Install now\", {duration: 4000});       \n          sb.onAction().subscribe(e =>  this.swUpdate.activateUpdate());\n          console.log(`Downloading new app version: ${update.version.hash}`);\n          location.reload();  \n          break;\n        case 'VERSION_READY':\n          console.log(`Current app version: ${update.currentVersion.hash}`);\n          console.log(`New app version ready for use: ${update.latestVersion.hash}`);\n          break;\n        case 'VERSION_INSTALLATION_FAILED':\n          console.log(`Failed to install app version '${update.version.hash}': ${update.error}`);\n          break;\n      }\n    });\n    this.swUpdate.checkForUpdate();\n    window.addEventListener(\"online\", this.updateNetworkStatusUI);\n    window.addEventListener(\"offline\", this.updateNetworkStatusUI);\n    if ((navigator as any).standalone === false){\n    this.snackBar.open(\"You can add this PWA to a home screen\", \"\", {duration: 3000});\n    }else if((navigator as any).standalone === undefined){\n      if (window.matchMedia(\"(display-mode: browser)\").matches){\n      window.addEventListener(\"beforeinstallprompt\", event => {\n        event.preventDefault();\n        const sb = this.snackBar.open(\"Do you want to install this app?\", \"Install\", {duration: 5000});\n        sb.onAction().subscribe(() => {\n          (event as any).prompt();\n          (event as any).userChoice().then((result: { outcome: string; }) => {\n            if (result.outcome === \"dismisses\"){\n\n            }else{\n\n            }\n          })\n        })\n        return false;\n      })\n    }\n  }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}