<form *ngIf="!registerMessage" [formGroup]="registerForm" (ngSubmit)="onRegister()">
    <mat-card outlined>
    <mat-form-field>
        <input matInput name="username" placeholder="Username" formControlName="username"/>
    </mat-form-field>
    <mat-error *ngIf="registerForm.get('username')?.dirty && registerForm.get('username')?.untouched && registerForm.hasError('required', 'username')">Username is required</mat-error>
    <mat-error *ngIf="registerForm.get('username')?.dirty && registerForm.get('username')?.untouched && registerForm.hasError('pattern', 'username')">Invalid pattern</mat-error>
    <mat-form-field>
        <input matInput type="password" name="password" placeholder="Password" formControlName="password"/>
    </mat-form-field>
    <mat-error *ngIf="registerForm.get('password')?.dirty && registerForm.get('password')?.untouched && registerForm.hasError('required', 'password')">Password is required</mat-error>
    <mat-error *ngIf="registerForm.get('password')?.dirty && registerForm.get('password')?.untouched && registerForm.hasError('pattern', 'password')">Invalid pattern</mat-error>
    <mat-form-field>
        <input matInput type="password" name="passwordConfirmation" placeholder="Confirm password" 
        formControlName="passwordConfirmation" [errorStateMatcher]="matcher"/>
    </mat-form-field>
    <mat-error *ngIf="registerForm.get('passwordConfirmation')?.dirty && registerForm.get('passwordConfirmation')?.untouched && registerForm.hasError('notSame')">Passwords don't match!</mat-error>
    <mat-error *ngIf="registerForm.get('passwordConfirmation')?.dirty && registerForm.get('passwordConfirmation')?.untouched && registerForm.hasError('pattern', 'passwordConfirmation')">Invalid pattern</mat-error>
    <button mat-button color="primary" type="submit">Register</button>
    <a mat-button href="/login">Already registered? Login here.</a>
</mat-card>
</form>
<mat-card>
    <h2 *ngIf="registerMessage">{{registerMessage}}</h2>
</mat-card>

